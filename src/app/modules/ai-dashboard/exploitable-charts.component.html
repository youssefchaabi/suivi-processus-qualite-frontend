<div class="exploitable-charts-container">
  <!-- Graphiques de Performance Qualité -->
  <div class="charts-row">
    <!-- Graphique de Performance par Type -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>
          <mat-icon>bar_chart</mat-icon>
          Performance par Type de Fiche
        </h3>
        <p>Analyse des performances selon le type de processus</p>
      </div>
      <div class="chart-container">
        <canvas #performanceChart width="400" height="300"></canvas>
      </div>
      <div class="chart-actions">
        <button mat-stroked-button class="export-btn" (click)="exportPerformanceData()">
          <mat-icon>file_download</mat-icon>
          Exporter pour Rapport
        </button>
      </div>
    </div>

    <!-- Graphique de Conformité Mensuelle -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>
          <mat-icon>timeline</mat-icon>
          Évolution Conformité Mensuelle
        </h3>
        <p>Suivi de la conformité sur 12 mois</p>
      </div>
      <div class="chart-container">
        <canvas #conformiteChart width="400" height="300"></canvas>
      </div>
      <div class="chart-actions">
        <button mat-stroked-button class="export-btn" (click)="exportConformiteData()">
          <mat-icon>file_download</mat-icon>
          Exporter pour Rapport
        </button>
      </div>
    </div>
  </div>

  <!-- Graphiques de Délais et Efficacité -->
  <div class="charts-row">
    <!-- Analyse des Délais de Traitement -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>
          <mat-icon>schedule</mat-icon>
          Analyse des Délais de Traitement
        </h3>
        <p>Distribution des délais par processus</p>
      </div>
      <div class="chart-container">
        <canvas #delaisChart width="400" height="300"></canvas>
      </div>
      <div class="metrics-summary">
        <div class="metric-item">
          <span class="metric-label">Délai Moyen:</span>
          <span class="metric-value">{{ getDelaiMoyen() }} jours</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">Délai Médian:</span>
          <span class="metric-value">{{ getDelaiMedian() }} jours</span>
        </div>
        <div class="metric-item">
          <span class="metric-label">Fiches en Retard:</span>
          <span class="metric-value critical">{{ getFichesEnRetard() }}</span>
        </div>
      </div>
      <div class="chart-actions">
        <button mat-stroked-button class="export-btn" (click)="exportDelaisData()">
          <mat-icon>file_download</mat-icon>
          Exporter pour Rapport
        </button>
      </div>
    </div>

    <!-- Matrice de Risques -->
    <div class="chart-card">
      <div class="chart-header">
        <h3>
          <mat-icon>grid_on</mat-icon>
          Matrice de Risques Qualité
        </h3>
        <p>Évaluation des risques par impact et probabilité</p>
      </div>
      <div class="chart-container">
        <canvas #risqueChart width="400" height="300"></canvas>
      </div>
      <div class="risk-legend">
        <div class="legend-item critical">
          <span class="legend-color"></span>
          <span>Critique ({{ getRisquesCritiques() }})</span>
        </div>
        <div class="legend-item high">
          <span class="legend-color"></span>
          <span>Élevé ({{ getRisquesEleves() }})</span>
        </div>
        <div class="legend-item medium">
          <span class="legend-color"></span>
          <span>Moyen ({{ getRisquesMoyens() }})</span>
        </div>
        <div class="legend-item low">
          <span class="legend-color"></span>
          <span>Faible ({{ getRisquesFaibles() }})</span>
        </div>
      </div>
      <div class="chart-actions">
        <button mat-stroked-button class="export-btn" (click)="exportRisqueData()">
          <mat-icon>file_download</mat-icon>
          Exporter pour Rapport
        </button>
      </div>
    </div>
  </div>
</div>